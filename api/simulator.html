<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulator &mdash; orbital-radar 0.0.2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Radarspec" href="radarspec.html" />
    <link rel="prev" title="API Reference" href="../api-reference.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            orbital-radar
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started with Orbital-Radar</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api-reference.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="radarspec.html">Radarspec</a></li>
<li class="toctree-l2"><a class="reference internal" href="suborbital.html">Groundbased</a></li>
<li class="toctree-l2"><a class="reference internal" href="helpers.html">Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotting.html">Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="readers.html">Readers</a></li>
<li class="toctree-l2"><a class="reference internal" href="writers.html">Writers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../output_description.html">Variable List - Output file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgments.html">Acknowledgments</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">orbital-radar</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api-reference.html">API Reference</a></li>
      <li class="breadcrumb-item active">Simulator</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/simulator.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-orbital_radar.simulator">
<span id="simulator"></span><h1>Simulator<a class="headerlink" href="#module-orbital_radar.simulator" title="Permalink to this heading">¶</a></h1>
<p>Runs the orbital radar simulator.</p>
<dl class="py class">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">orbital_radar.simulator.</span></span><span class="sig-name descname"><span class="pre">Simulator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sat_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_earthcare</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nyquist_from_prf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms_threshold_integral</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">41</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">radar_specs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the orbital radar simulator.</p>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.add_attributes" title="orbital_radar.simulator.Simulator.add_attributes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_attributes</span></code></a>()</p></td>
<td><p>Adds attributes to the variables of the dataset</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.add_noise" title="orbital_radar.simulator.Simulator.add_noise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_noise</span></code></a>(x, x_std, noise)</p></td>
<td><p>Equation to calculate the noise from values without noise, the uncertainty of the values, and random noise.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.apply_detection_limit" title="orbital_radar.simulator.Simulator.apply_detection_limit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_detection_limit</span></code></a>(var_ze, var_other)</p></td>
<td><p>Applies the detection limit of the spaceborne radar to the along-height convoluted data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_along_track_sat_bin_edges" title="orbital_radar.simulator.Simulator.calculate_along_track_sat_bin_edges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_along_track_sat_bin_edges</span></code></a>()</p></td>
<td><p>Calculate the bin edges of the along-track satellite grid.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_height_sat_bin_edges" title="orbital_radar.simulator.Simulator.calculate_height_sat_bin_edges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_height_sat_bin_edges</span></code></a>()</p></td>
<td><p>Calculate the bin edges of the height satellite grid.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_ms_flag" title="orbital_radar.simulator.Simulator.calculate_ms_flag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_ms_flag</span></code></a>()</p></td>
<td><p>Calculates the multiple scattering flag.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_nubf" title="orbital_radar.simulator.Simulator.calculate_nubf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_nubf</span></code></a>()</p></td>
<td><p>Calculates the non-uniform beam filling from the standard deviation of Ze within the radar volume.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_nubf_flag" title="orbital_radar.simulator.Simulator.calculate_nubf_flag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_nubf_flag</span></code></a>([threshold])</p></td>
<td><p>Calculate non-uniform beam filling flag.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_signal_fraction" title="orbital_radar.simulator.Simulator.calculate_signal_fraction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_signal_fraction</span></code></a>()</p></td>
<td><p>Calculates the fraction of bins that contain a ze signal above the detection limit of the spaceborne radar.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_vm_bias" title="orbital_radar.simulator.Simulator.calculate_vm_bias"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_vm_bias</span></code></a>()</p></td>
<td><p>Calculate the satellite Doppler velocity bias between the estimate with and without satellite motion error.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_vm_bias_flag" title="orbital_radar.simulator.Simulator.calculate_vm_bias_flag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_vm_bias_flag</span></code></a>([threshold])</p></td>
<td><p>Calculate the satellite Doppler velocity bias flag.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_vm_noise" title="orbital_radar.simulator.Simulator.calculate_vm_noise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_vm_noise</span></code></a>()</p></td>
<td><p>Adds noise to satellite Doppler velocity based on the pre-defined lookup table with noise values for different radar reflectivity bins.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_vm_std_nubf" title="orbital_radar.simulator.Simulator.calculate_vm_std_nubf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_vm_std_nubf</span></code></a>()</p></td>
<td><p>Calculate outstanding error in correcting Mean Doppler Velocity biases caused by non-uniform beam filling</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.calculate_ze_noise" title="orbital_radar.simulator.Simulator.calculate_ze_noise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_ze_noise</span></code></a>()</p></td>
<td><p>Adds noise to satellite radar reflectivity based on the pre-defined lookup table with noise values for different radar reflectivity bins.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.check_input_dataset" title="orbital_radar.simulator.Simulator.check_input_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_input_dataset</span></code></a>()</p></td>
<td><p>Check user input for consistency.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.convolve_along_track" title="orbital_radar.simulator.Simulator.convolve_along_track"><code class="xref py py-obj docutils literal notranslate"><span class="pre">convolve_along_track</span></code></a>()</p></td>
<td><p>Calculates the along-track convolution from the input suborbital data using the along-track weighting function of the spaceborne radar.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.convolve_height" title="orbital_radar.simulator.Simulator.convolve_height"><code class="xref py py-obj docutils literal notranslate"><span class="pre">convolve_height</span></code></a>()</p></td>
<td><p>Convolution of the along-track integrated data with the range weighting function of the spaceborne radar.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.fold_vm" title="orbital_radar.simulator.Simulator.fold_vm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fold_vm</span></code></a>()</p></td>
<td><p>Doppler velocity folding correction.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.integrate_along_track" title="orbital_radar.simulator.Simulator.integrate_along_track"><code class="xref py py-obj docutils literal notranslate"><span class="pre">integrate_along_track</span></code></a>()</p></td>
<td><p>Integrates the along-track convoluted data to profiles, which represent the satellite's footprint.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.plot" title="orbital_radar.simulator.Simulator.plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot</span></code></a>(**kwds)</p></td>
<td><p>Along-track plot of the simulated radar reflectivity and Doppler velocity.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.plot_histogram" title="orbital_radar.simulator.Simulator.plot_histogram"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_histogram</span></code></a>(**kwds)</p></td>
<td><p>Histogram plot of the simulated radar reflectivity and Doppler velocity.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.plot_scatter" title="orbital_radar.simulator.Simulator.plot_scatter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_scatter</span></code></a>(**kwds)</p></td>
<td><p>Scatter plot between satellite data and suborbital data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.prepare_input_dataset" title="orbital_radar.simulator.Simulator.prepare_input_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_input_dataset</span></code></a>()</p></td>
<td><p>Prepares input dataset for computations.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.transform" title="orbital_radar.simulator.Simulator.transform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform</span></code></a>(ds)</p></td>
<td><p>Runs the entire simulator.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orbital_radar.simulator.Simulator.vm_uncertainty_equation" title="orbital_radar.simulator.Simulator.vm_uncertainty_equation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">vm_uncertainty_equation</span></code></a>(vm_std_broad, ...)</p></td>
<td><p>Calculates the total Doppler velocity uncertainty based on the broadening Doppler velocity uncertainty and the non-uniform beam filling Doppler velocity uncertainty.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.add_attributes">
<span class="sig-name descname"><span class="pre">add_attributes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.add_attributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.add_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds attributes to the variables of the dataset</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.add_noise">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_noise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_std</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noise</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.add_noise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.add_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Equation to calculate the noise from values without noise, the
uncertainty of the values, and random noise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x</strong><span class="classifier">xr.DataArray</span></dt><dd><p>Radar reflectivity [dB] or doppler velocity [m s-1]</p>
</dd>
<dt><strong>x_std</strong><span class="classifier">float</span></dt><dd><p>Radar reflectivity uncertainty [dB] or doppler velocity uncertainty
[m s-1]</p>
</dd>
<dt><strong>noise</strong><span class="classifier">np.array</span></dt><dd><p>Random noise with shape equal to x.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>x_noise</strong><span class="classifier">xr.DataArray</span></dt><dd><p>Radar reflectivity with added noise [dB]</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.apply_detection_limit">
<span class="sig-name descname"><span class="pre">apply_detection_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var_ze</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.apply_detection_limit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.apply_detection_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the detection limit of the spaceborne radar to the along-height
convoluted data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>var_ze</strong><span class="classifier">xr.DataArray</span></dt><dd><p>Radar reflectivity reflectivity variable name</p>
</dd>
<dt><strong>var_other</strong><span class="classifier">list</span></dt><dd><p>List with other variables that should be masked with the radar
reflectivity detection limit.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_along_track_sat_bin_edges">
<span class="sig-name descname"><span class="pre">calculate_along_track_sat_bin_edges</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_along_track_sat_bin_edges"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_along_track_sat_bin_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the bin edges of the along-track satellite grid. This way
is equivalent to height.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_height_sat_bin_edges">
<span class="sig-name descname"><span class="pre">calculate_height_sat_bin_edges</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_height_sat_bin_edges"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_height_sat_bin_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the bin edges of the height satellite grid. This way is
equivalent to along-track.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_ms_flag">
<span class="sig-name descname"><span class="pre">calculate_ms_flag</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_ms_flag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_ms_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the multiple scattering flag. The flag is 1 if multiple
scattering occurs, and 0 if no multiple scattering occurs.</p>
<p>The flag is calculated from the radar reflectivity of the spaceborne
radar from these steps:
- Calculate integral of radar reflectivity above a certain threshold
from the top of the atmosphere (TOA) down to the surface.
- Multiple scattering occurs if the integral reaches a critical value
at a certain height.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_nubf">
<span class="sig-name descname"><span class="pre">calculate_nubf</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_nubf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_nubf" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the non-uniform beam filling from the standard
deviation of Ze within the radar volume.</p>
<p>Currently, the flag is expressed as standard deviation only and no
threshold to indicate high standard deviation is applied. This may
be added in the future to reduce the output file size.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_nubf_flag">
<span class="sig-name descname"><span class="pre">calculate_nubf_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_nubf_flag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_nubf_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate non-uniform beam filling flag. The flag is 1 if the
non-uniform beam filling is higher than a certain threshold, and 0
otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>threshold</strong><span class="classifier">float</span></dt><dd><p>Threshold for non-uniform beam filling. The default is 1 dB.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_signal_fraction">
<span class="sig-name descname"><span class="pre">calculate_signal_fraction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_signal_fraction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_signal_fraction" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the fraction of bins that contain a ze signal above the
detection limit of the spaceborne radar. The fraction is 1 if all
bins contain signal, and 0 if no bins contain signal.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_vm_bias">
<span class="sig-name descname"><span class="pre">calculate_vm_bias</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_vm_bias"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_vm_bias" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the satellite Doppler velocity bias between the estimate
with and without satellite motion error.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_vm_bias_flag">
<span class="sig-name descname"><span class="pre">calculate_vm_bias_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_vm_bias_flag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_vm_bias_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the satellite Doppler velocity bias flag. The flag is 1 if
the absolute satellite Doppler velocity bias is higher than 0.5 m s-1,
and 0 otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>threshold</strong><span class="classifier">float</span></dt><dd><p>Threshold for satellite Doppler velocity bias. The default is 0.5
m s-1.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_vm_noise">
<span class="sig-name descname"><span class="pre">calculate_vm_noise</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_vm_noise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_vm_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds noise to satellite Doppler velocity based on the pre-defined
lookup table with noise values for different radar reflectivity bins.</p>
<p>Note:
The noise is added to the satellite Doppler velocity with the satellite
motion error.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_vm_std_nubf">
<span class="sig-name descname"><span class="pre">calculate_vm_std_nubf</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_vm_std_nubf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_vm_std_nubf" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate outstanding error in correcting Mean Doppler Velocity biases
caused by non-uniform beam filling</p>
<p>The calculation is based on the horizontal radar reflectivity gradient
at the input resolution. The gradient is calculated along the along-
track direction. The gradient is then averaged onto the satellite grid
and the absolute value is taken. The error is then calculated as 0.15
times the gradient divided by 3 dBZ/km. Bins without reflectivity are
set to 0 before averaging onto satellite resolution.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.calculate_ze_noise">
<span class="sig-name descname"><span class="pre">calculate_ze_noise</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.calculate_ze_noise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.calculate_ze_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds noise to satellite radar reflectivity based on the pre-defined
lookup table with noise values for different radar reflectivity bins.
Empty bins are filled with noise according to the noise level.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.check_input_dataset">
<span class="sig-name descname"><span class="pre">check_input_dataset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.check_input_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.check_input_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Check user input for consistency.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.convolve_along_track">
<span class="sig-name descname"><span class="pre">convolve_along_track</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.convolve_along_track"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.convolve_along_track" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the along-track convolution from the input suborbital data
using the along-track weighting function of the spaceborne radar.
Further, the function calculates the error due to satellite velocity.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.convolve_height">
<span class="sig-name descname"><span class="pre">convolve_height</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.convolve_height"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.convolve_height" title="Permalink to this definition">¶</a></dt>
<dd><p>Convolution of the along-track integrated data with the range
weighting function of the spaceborne radar.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.fold_vm">
<span class="sig-name descname"><span class="pre">fold_vm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.fold_vm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.fold_vm" title="Permalink to this definition">¶</a></dt>
<dd><p>Doppler velocity folding correction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.integrate_along_track">
<span class="sig-name descname"><span class="pre">integrate_along_track</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.integrate_along_track"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.integrate_along_track" title="Permalink to this definition">¶</a></dt>
<dd><p>Integrates the along-track convoluted data to profiles, which represent
the satellite’s footprint. The along-track integration is given by the
along track resolution satellite variable.</p>
<p>Along track bins of satellite refer to center of field of view.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Along-track plot of the simulated radar reflectivity and Doppler
velocity.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.plot_histogram">
<span class="sig-name descname"><span class="pre">plot_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.plot_histogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.plot_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Histogram plot of the simulated radar reflectivity and Doppler
velocity.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.plot_scatter">
<span class="sig-name descname"><span class="pre">plot_scatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.plot_scatter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.plot_scatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Scatter plot between satellite data and suborbital data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.prepare_input_dataset">
<span class="sig-name descname"><span class="pre">prepare_input_dataset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.prepare_input_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.prepare_input_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares input dataset for computations. This only includes replacing
nan values by zero in both ze and vm.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the entire simulator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>ds</strong><span class="classifier">xarray.Dataset</span></dt><dd><p>Data from suborbital radar interpolated to “along_track” [m] and
“height” [m] coordinates. The dataset must contain the following
variables:
Radar reflectivity “ze” [mm6 m-3],
Doppler velocity “vm” [m s-1].
Both variables should have no nan values. Any nan’s should be
filled with zeros.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="orbital_radar.simulator.Simulator.vm_uncertainty_equation">
<span class="sig-name descname"><span class="pre">vm_uncertainty_equation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vm_std_broad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vm_std_nubf</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orbital_radar/simulator.html#Simulator.vm_uncertainty_equation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#orbital_radar.simulator.Simulator.vm_uncertainty_equation" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the total Doppler velocity uncertainty based on the
broadening Doppler velocity uncertainty and the non-uniform beam
filling Doppler velocity uncertainty.</p>
<p>Based on Equation (4) in</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>vm_std_broad</strong><span class="classifier">float, np.array</span></dt><dd><p>Doppler velocity uncertainty due to broadening [m s-1]</p>
</dd>
<dt><strong>vm_std_nubf</strong><span class="classifier">float, np.array</span></dt><dd><p>Doppler velocity uncertainty due to non-uniform beam filling
[m s-1]</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../api-reference.html" class="btn btn-neutral float-left" title="API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="radarspec.html" class="btn btn-neutral float-right" title="Radarspec" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Lukas Pfitzenmaier, Nils Risse, Pavlos Kollias, Bernat Puigdomenech.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>